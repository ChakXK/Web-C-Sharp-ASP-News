@using Microsoft.AspNet.Identity
@using System.Linq;
@using System.Threading.Tasks;
@using System.Net;
@using System.Web;
@using System.Web.Mvc;
@using news.Models;


@{ApplicationDbContext db = new ApplicationDbContext();
    var category1 = db.Categories.Where(c=>c.Name=="Мероприятия").First();
    var category2 = db.Categories.Where(c => c.Name == "Спорт").First();}

<div class="col-md-8">
    <!-- row -->
    <div class="row">
        <!-- Column 1 -->
        <div class="col-md-6 col-sm-6">
            <!-- section title -->
            <div class="section-title">
                <h2 class="title">@category1.Name</h2>
            </div>
            <!-- /section title -->
            @foreach (var a in category1.Articles.OrderByDescending(c=>c.Datetime).Take(2))
            {
            <!-- ARTICLE -->
            <article class="article">
                <div class="article-img">
                    <a href="/Articles/Details/@a.Id">
                        <img src="@Url.Content("~/Content/imgfiles/" + a.Images.Where(img => img.Number == 1)?.First()?.Id +
a.Images.Where(img => img.Number == 1)?.First()?.Name)" alt="">
                    </a>
                    <ul class="article-info">
                    </ul>
                </div>
                <div class="article-body">
                    <h3 class="article-title"><a href="/Articles/Details/@a.Id">@a.Heading</a></h3>
                    <ul class="article-meta">
                        <li><i class="fa fa-clock-o"></i> @a.Datetime</li>
                        <li><i class="fa fa-comments"></i> @a.Comments.Count</li>
                    </ul>
                    <p>@a.Briefly...</p>
                </div>
            </article>
            <!-- /ARTICLE -->
            }
        </div>
        <!-- /Column 1 -->
        <!-- Column 2 -->
        <div class="col-md-6 col-sm-6">
            <!-- section title -->
            <div class="section-title">
                <h2 class="title">@category2.Name</h2>
            </div>
            <!-- /section title -->
            @foreach (var a in category2.Articles.OrderByDescending(c => c.Datetime).Take(2))
            {
                <!-- ARTICLE -->
                <article class="article">
                    <div class="article-img">
                        <a href="/Articles/Details/@a.Id">
                            <img src="@Url.Content("~/Content/imgfiles/" + a.Images.Where(img => img.Number == 1)?.First()?.Id +
a.Images.Where(img => img.Number == 1)?.First()?.Name)" alt="">
                        </a>
                        <ul class="article-info">
                        </ul>
                    </div>
                    <div class="article-body">
                        <h3 class="article-title"><a href="/Articles/Details/@a.Id">@a.Heading</a></h3>
                        <ul class="article-meta">
                            <li><i class="fa fa-clock-o"></i> @a.Datetime</li>
                            <li><i class="fa fa-comments"></i> @a.Comments.Count</li>
                        </ul>
                        <p>@a.Briefly...</p>
                    </div>
                </article>
                <!-- /ARTICLE -->
            }
            </div>
        <!-- /Column 2 -->
    </div>
    <!-- /row -->
</div>
